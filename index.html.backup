<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reweave • Sustainable Fashion, Reimagined</title>
  <link rel="icon" type="image/png" href="images/Reweave_logo-removebg-preview.png" />
  <link rel="stylesheet" href="shared/styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <!-- SEO and Structured Data -->
  <meta name="description" content="Crafted essentials for modern life. Curated silhouettes in heritage Songket and Batik. Handwoven craft meets daily utility." />
  <meta name="keywords" content="sustainable fashion, batik, songket, handcrafted, malaysian fashion, eco-friendly clothing" />
  <meta property="og:title" content="Reweave • Sustainable Fashion, Reimagined" />
  <meta property="og:description" content="Crafted essentials for modern life. Curated silhouettes in heritage Songket and Batik." />
  <meta property="og:image" content="images/Batik Front (WIP).png" />
  <meta property="og:url" content="https://www.reweave.shop" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  
  <!-- Organization Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Reweave",
    "url": "https://www.reweave.shop",
    "logo": "https://www.reweave.shop/images/Reweave_logo-removebg-preview.png",
    "description": "Sustainable fashion reimagined - crafted essentials in heritage Songket and Batik",
    "sameAs": [
      "https://www.instagram.com/reweave.my",
      "https://www.facebook.com/reweave.my"
    ],
    "contactPoint": {
      "@type": "ContactPoint",
      "telephone": "+60-12-345-6789",
      "contactType": "customer service",
      "areaServed": "MY",
      "availableLanguage": ["en", "ms"]
    }
  }
  </script>
  
  <!-- Website Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Reweave",
    "url": "https://www.reweave.shop",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://www.reweave.shop/search?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  
  <style>
    /* Page-specific styles */
    .hero {
      padding: 140px 0 80px;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--luxury-gray) 0%, var(--primary-white) 100%);
    }
    
    .hero-content {
      max-width: var(--container-max-width);
      margin: 0 auto;
      padding: 0 var(--container-padding);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 60px;
      align-items: center;
    }
    
    .hero-text h1 {
      font-family: var(--font-serif);
      font-size: 3.5rem;
      font-weight: 300;
      line-height: 1.2;
      margin-bottom: 20px;
      letter-spacing: -1px;
    }
    
    .hero-text p {
      font-size: 1.2rem;
      color: var(--text-gray);
      margin-bottom: 30px;
      font-weight: 300;
    }
    
    .hero-actions {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .hero-image img {
      width: 100%;
      height: auto;
      border-radius: var(--border-radius-large);
      box-shadow: var(--shadow-heavy);
    }
    
    .products {
      padding: 80px 0;
      background: var(--primary-white);
    }
    
    .section-title {
      font-family: var(--font-serif);
      font-size: 2.5rem;
      font-weight: 300;
      text-align: center;
      margin-bottom: 50px;
      letter-spacing: 1px;
    }
    
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 40px;
      margin-top: 40px;
    }
    
    .product-card {
      background: var(--primary-white);
      border-radius: var(--border-radius-large);
      overflow: hidden;
      transition: var(--transition);
      border: 1px solid var(--border-gray);
    }
    
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-medium);
    }
    
    .product-image {
      width: 100%;
      height: 300px;
      object-fit: cover;
      transition: var(--transition);
    }
    
    .product-card:hover .product-image {
      transform: scale(1.05);
    }
    
    .product-info {
      padding: 24px;
    }
    
    .product-title {
      font-family: var(--font-serif);
      font-size: 1.4rem;
      font-weight: 300;
      margin-bottom: 8px;
      letter-spacing: 0.5px;
    }
    
    .product-price {
      font-size: 1.1rem;
      color: var(--text-gray);
      margin-bottom: 16px;
      font-weight: 300;
    }
    
    .product-options {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .option-btn {
      padding: 6px 12px;
      border: 1px solid var(--border-gray);
      background: var(--primary-white);
      border-radius: var(--border-radius);
      font-size: 12px;
      cursor: pointer;
      transition: var(--transition);
      font-family: var(--font-sans);
      font-weight: 300;
    }
    
    .option-btn:hover,
    .option-btn.active {
      background: var(--primary-black);
      color: var(--primary-white);
      border-color: var(--primary-black);
    }
    
    .product-actions {
      display: flex;
      gap: 12px;
    }
    
    .product-actions .btn {
      flex: 1;
      padding: 10px 16px;
      font-size: 13px;
    }
    
    .trust {
      padding: 60px 0;
      background: var(--luxury-gray);
    }
    
    .trust-badges {
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .hero-content {
        grid-template-columns: 1fr;
        text-align: center;
        gap: 40px;
      }
      
      .hero-text h1 {
        font-size: 2.5rem;
      }
      
      .hero-actions {
        justify-content: center;
        flex-wrap: wrap;
      }
      
      .products-grid {
        grid-template-columns: 1fr;
        gap: 30px;
      }
      
      .trust-badges {
        gap: 15px;
      }
    }
    
    @media (max-width: 480px) {
      .hero-text h1 {
        font-size: 2rem;
      }
      
      .section-title {
        font-size: 2rem;
      }
      
      .hero-actions {
        flex-direction: column;
        align-items: center;
      }
      
      .hero-actions .btn {
        width: 100%;
        max-width: 250px;
      }
    }
  </style>
</head>
<body>
  <!-- Standardized Header -->
  <!-- Standardized Header Component for Reweave -->
<header class="header">
  <div class="header-container">
    <div class="nav-left">
      <button class="nav-btn" onclick="toggleMenu()">
        <i class="fas fa-bars"></i> Menu
      </button>
      <button class="nav-btn" title="AI Try-On">AI Try-On</button>
    </div>
    
    <a href="/" class="logo">REWEAVE</a>
    
    <div class="nav-right">
      <button class="nav-btn cart-btn">
        <i class="fas fa-shopping-bag"></i>
        <span class="cart-count" id="cartCount">0</span>
      </button>
    </div>
  </div>
</header>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu">
  <div class="menu-header">
    <h3>Menu</h3>
    <button class="nav-btn" onclick="toggleMenu()">
      <i class="fas fa-times"></i>
    </button>
  </div>
  
  <div class="menu-section">
    <div class="menu-title">Shop</div>
    <a href="pages/shop/index.html" class="menu-link">Shop All</a>
    <a href="pages/shop/index.html#new-arrivals" class="menu-link">New Arrivals</a>
    <a href="pages/shop/index.html#batik-heritage" class="menu-link">Batik Heritage</a>
    <a href="pages/shop/index.html#songket-collection" class="menu-link">Songket Collection</a>
    <a href="pages/shop/index.html#accessories" class="menu-link">Accessories</a>
  </div>
  
  <div class="menu-section">
    <div class="menu-title">Our Story</div>
    <a href="pages/story/index.html" class="menu-link">About Reweave</a>
    <a href="pages/artisan/index.html" class="menu-link">Artisan Craft</a>
    <a href="pages/culture/index.html" class="menu-link">Cultural Heritage</a>
    <a href="pages/impact/index.html" class="menu-link">Sustainability</a>
    <a href="pages/community/index.html" class="menu-link">Community</a>
  </div>
  
  <div class="menu-section">
    <div class="menu-title">Experience</div>
    <a href="/pages/tryon/index.html" class="menu-link">AI Try-On</a>
    <a href="/pages/customize/index.html" class="menu-link">Customize</a>
    <a href="/pages/journal/index.html" class="menu-link">Journal</a>
  </div>
  
  <div class="menu-section">
    <div class="menu-title">Support</div>
    <a href="pages/team/index.html" class="menu-link">Contact Us</a>
    <a href="#" class="menu-link">Shipping & Returns</a>
    <a href="#" class="menu-link">Size Guide</a>
    <a href="#" class="menu-link">Care Instructions</a>
  </div>
</div>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="menu-header">
      <h3>Menu</h3>
      <button class="nav-btn" onclick="toggleMenu()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="menu-section">
      <div class="menu-title">Shop</div>
      <a href="pages/shop/index.html" class="menu-link">Shop All</a>
      <a href="pages/shop/index.html#new-arrivals" class="menu-link">New Arrivals</a>
      <a href="pages/shop/index.html#batik-heritage" class="menu-link">Batik Heritage</a>
      <a href="pages/shop/index.html#songket-collection" class="menu-link">Songket Collection</a>
      <a href="pages/shop/index.html#accessories" class="menu-link">Accessories</a>
    </div>
    
    <div class="menu-section">
      <div class="menu-title">Our Story</div>
      <a href="pages/story/index.html" class="menu-link">About Reweave</a>
      <a href="pages/artisan/index.html" class="menu-link">Artisan Craft</a>
      <a href="pages/culture/index.html" class="menu-link">Cultural Heritage</a>
      <a href="pages/impact/index.html" class="menu-link">Sustainability</a>
      <a href="pages/community/index.html" class="menu-link">Community</a>
    </div>
    
    <div class="menu-section">
      <div class="menu-title">Experience</div>
      <a href="/pages/tryon/index.html" class="menu-link">AI Try-On</a>
      <a href="/pages/customize/index.html" class="menu-link">Customize</a>
      <a href="/pages/journal/index.html" class="menu-link">Journal</a>
    </div>
    
    <div class="menu-section">
      <div class="menu-title">Support</div>
      <a href="pages/team/index.html" class="menu-link">Contact Us</a>
      <a href="#" class="menu-link">Shipping & Returns</a>
      <a href="#" class="menu-link">Size Guide</a>
      <a href="#" class="menu-link">Care Instructions</a>
    </div>
  </div>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <div class="hero-text">
        <h1>Crafted essentials for modern life</h1>
        <p>Curated silhouettes in heritage Songket and Batik. Handwoven craft meets daily utility.</p>
        <div class="hero-actions">
          <a href="#products" class="btn">Shop Now</a>
          <a href="/pages/tryon/index.html" class="btn btn-outline">AI Try-On</a>
          <a href="#story" class="btn btn-outline">Our Story</a>
        </div>
        <div class="trust-badges">
          <span class="trust-badge">FPX Available</span>
          <span class="trust-badge">Visa</span>
          <span class="trust-badge">Mastercard</span>
          <span class="trust-badge">30-day Returns</span>
        </div>
      </div>
      <div class="hero-image">
        <img src="images/Batik Front (WIP).png" alt="Reweave Heritage Collection" loading="lazy" />
      </div>
    </div>
  </section>

  <!-- Products Section -->
  <section class="products" id="products">
    <div class="container">
      <h2 class="section-title">Shop the Collection</h2>
      
      <div class="products-grid" id="productsGrid">
        <!-- Products will be loaded dynamically from Supabase -->
        <div class="text-center" style="grid-column: 1 / -1; padding: 60px 0;">
          <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: var(--text-gray); margin-bottom: 20px;"></i>
          <p style="color: var(--text-gray);">Loading products...</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Trust Section -->
  <section class="trust">
    <div class="container">
      <div class="trust-badges">
        <span class="trust-badge">Free Shipping Above RM150</span>
        <span class="trust-badge">30-Day Returns</span>
        <span class="trust-badge">Handcrafted Quality</span>
        <span class="trust-badge">Sustainable Materials</span>
      </div>
    </div>
  </section>

  <!-- Standardized Footer -->
  <!-- Standardized Footer Component for Reweave -->
<footer class="footer">
  <div class="container">
    <div class="footer-brand">REWEAVE</div>
    <div class="footer-text">
      Sustainable fashion, reimagined. Crafting heritage into modern essentials.
    </div>
    <div class="footer-links">
      <a href="pages/story/index.html" class="footer-link">Our Story</a>
      <a href="pages/impact/index.html" class="footer-link">Sustainability</a>
      <a href="pages/community/index.html" class="footer-link">Community</a>
      <a href="pages/team/index.html" class="footer-link">Contact</a>
    </div>
    <div class="footer-trust">
      <span class="trust-badge">FPX Available</span>
      <span class="trust-badge">Visa</span>
      <span class="trust-badge">Mastercard</span>
      <span class="trust-badge">30-day Returns</span>
    </div>
  </div>
</footer>

  <!-- JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="shared/script.js"></script>
  <script>
    // Supabase configuration
    const supabaseUrl = 'https://dkpaeiyixdwzjpvvszyy.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRrcGFlaXlpeGR3empwdnZzenl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1MjAyNTUsImV4cCI6MjA3OTA5NjI1NX0.tcESQl8N7gFFkzh-OOvRBnHFyJ2CC9W0-vs3e6ItZTc';
    const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

    // Products functionality
    let products = [];
    
    // Fetch product variants from Supabase
    async function fetchProducts() {
      try {
        const { data, error } = await supabaseClient
          .from('product_variants')
          .select('*, products(title, description, category)')
          .eq('is_active', true)
          .order('product_id');
        
        if (error) {
          console.error('Error fetching product variants:', error);
          showFallbackProducts();
          return;
        }
        
        // Group variants by product
        const groupedProducts = {};
        data.forEach(variant => {
          if (!groupedProducts[variant.product_id]) {
            groupedProducts[variant.product_id] = {
              id: variant.product_id,
              title: variant.products.title,
              description: variant.products.description,
              category: variant.products.category,
              variants: []
            };
          }
          groupedProducts[variant.product_id].variants.push(variant);
        });
        
        products = Object.values(groupedProducts);
        renderProducts(products);
        
        // Track product view
        trackEvent('view_product_list', {
          category: 'homepage',
          product_count: products.length
        });
        
      } catch (error) {
        console.error('Error fetching product variants:', error);
        showFallbackProducts();
      }
    }
    
    function showFallbackProducts() {
      // Show fallback products if Supabase is unavailable
      const productsGrid = document.getElementById('productsGrid');
      productsGrid.innerHTML = `
        <div class="text-center" style="grid-column: 1 / -1; padding: 40px 0;">
          <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: var(--text-gray); margin-bottom: 20px;"></i>
          <p style="color: var(--text-gray); margin-bottom: 30px;">Unable to load products from our database.</p>
          <a href="pages/shop/index.html" class="btn">Browse Shop</a>
        </div>
      `;
    }
    
    // Render products with variants
    function renderProducts(productsData) {
      const productsGrid = document.getElementById('productsGrid');
      productsGrid.innerHTML = '';
      
      if (productsData.length === 0) {
        productsGrid.innerHTML = `
          <div class="text-center" style="grid-column: 1 / -1; padding: 60px 0;">
            <i class="fas fa-shopping-bag" style="font-size: 3rem; color: var(--text-gray); margin-bottom: 20px;"></i>
            <h3 style="margin-bottom: 10px;">No products available</h3>
            <p style="color: var(--text-gray);">Check back soon for new arrivals!</p>
          </div>
        `;
        return;
      }
      
      productsData.forEach(product => {
        if (product.variants.length === 0) return;
        
        const productCard = document.createElement('div');
        productCard.className = 'product-card';
        productCard.dataset.productId = product.id;
        
        // Use first variant as default display
        const defaultVariant = product.variants[0];
        
        // Create color options from variants
        const colorOptions = product.variants.map((variant, index) => 
          `<button class="option-btn ${index === 0 ? 'active' : ''}" 
                   onclick="selectVariant('${product.id}', '${variant.id}', this)"
                   data-variant-id="${variant.id}"
                   aria-label="Select ${variant.color} variant">
            ${variant.color}
          </button>`
        ).join('');
        
        productCard.innerHTML = `
          <img src="${defaultVariant.image}" 
               alt="${defaultVariant.variant_name}" 
               class="product-image" 
               id="image-${product.id}"
               loading="lazy">
          <div class="product-info">
            <h3 class="product-title" id="title-${product.id}">${defaultVariant.variant_name}</h3>
            <div class="product-price" id="price-${product.id}">RM ${Number(defaultVariant.price || 0).toFixed(2)}</div>
            <div class="product-options" id="options-${product.id}" role="group" aria-label="Color options">
              ${colorOptions}
            </div>
            <div class="product-actions">
              <button class="btn" 
                      data-add-to-cart
                      id="cart-${product.id}"
                      data-product-id="${defaultVariant.id}"
                      data-product-name="${defaultVariant.variant_name}"
                      data-product-price="${Number(defaultVariant.price || 0)}"
                      data-product-image="${defaultVariant.image}"
                      data-variant="${defaultVariant.color}">
                Add to Cart
              </button>
              <button class="btn btn-outline"
                      onclick="window.location.href = '/pages/tryon/index.html'"
                      title="Try It On">
                Try It On
              </button>
              <button class="btn btn-outline"
                      data-buy-now
                      data-product-id="${defaultVariant.id}"
                      data-product-name="${defaultVariant.variant_name}"
                      data-product-price="${Number(defaultVariant.price || 0)}"
                      data-product-image="${defaultVariant.image}"
                      data-variant="${defaultVariant.color}">
                Buy Now
              </button>
            </div>
          </div>
        `;
        
        productsGrid.appendChild(productCard);
      });
    }
    
    // Handle variant selection
    function selectVariant(productId, variantId, button) {
      // Update active state
      const productCard = button.closest('.product-card');
      productCard.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
      
      // Find the variant data
      const product = products.find(p => p.id === productId);
      const variant = product.variants.find(v => v.id === variantId);
      
      if (variant) {
        // Update display
        document.getElementById(`image-${productId}`).src = variant.image;
        document.getElementById(`title-${productId}`).textContent = variant.variant_name;
        document.getElementById(`price-${productId}`).textContent = `RM ${Number(variant.price || 0).toFixed(2)}`;
        
        // Update cart button
        const cartBtn = document.getElementById(`cart-${productId}`);
        cartBtn.setAttribute('onclick', `addToCart('${variant.id}')`);
        cartBtn.setAttribute('data-product-id', variant.id);
        cartBtn.setAttribute('data-product-name', variant.variant_name);
        cartBtn.setAttribute('data-product-price', Number(variant.price || 0));
        cartBtn.setAttribute('data-product-image', variant.image);
        cartBtn.setAttribute('data-variant', variant.color);
        
        // Update buy now button
        const buyNowBtn = cartBtn.nextElementSibling;
        buyNowBtn.setAttribute('data-product-id', variant.id);
        buyNowBtn.setAttribute('data-product-name', variant.variant_name);
        buyNowBtn.setAttribute('data-product-price', Number(variant.price || 0));
        buyNowBtn.setAttribute('data-product-image', variant.image);
        buyNowBtn.setAttribute('data-variant', variant.color);
        
        // Track variant selection
        trackEvent('select_variant', {
          product_id: productId,
          variant_id: variantId,
          variant_color: variant.color
        });
      }
    }
    
    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      fetchProducts();
      
      // Add smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({ behavior: 'smooth' });
          }
        });
      });
      
      // Close menu when clicking outside
      document.addEventListener('click', function(e) {
        const mobileMenu = document.getElementById('mobileMenu');
        const menuBtn = document.querySelector('.menu-btn');
        
        if (mobileMenu && mobileMenu.classList.contains('active')) {
          const clickedInsideMenu = mobileMenu.contains(e.target);
          const clickedMenuBtn = menuBtn && menuBtn.contains(e.target);
          
          if (!clickedInsideMenu && !clickedMenuBtn) {
            toggleMenu(false);
          }
        }
      });
      
      // Close menu on escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          toggleMenu(false);
        }
      });
      
      // Close menu when window is resized to desktop
      window.addEventListener('resize', function() {
        if (window.innerWidth > 768) {
          toggleMenu(false);
        }
      });
    });
    
    // Mobile menu toggle function
    function toggleMenu(forceClose) {
      const mobileMenu = document.getElementById('mobileMenu');
      const body = document.body;
      
      if (!mobileMenu) return;
      
      const shouldOpen = forceClose === false ? false : !mobileMenu.classList.contains('active');
      
      if (shouldOpen) {
        mobileMenu.classList.add('active');
        body.classList.add('nav-open');
        body.style.overflow = 'hidden';
      } else {
        mobileMenu.classList.remove('active');
        body.classList.remove('nav-open');
        body.style.overflow = '';
      }
    }
  </script>
  
  <!-- AI Chatbot Widget -->
  <script id="shieldbase-chatbot-widget">(function(){window.SbaiConfig={apiBase:"https://demo.sbai.cloud",appId:"ca61bc90-3fb9-4cde-a7ed-aef28d127c1a"};function initChatWidget(){if(document.getElementById('sbai-chat-btn'))return;var chatBtn=document.createElement("div");chatBtn.id="sbai-chat-btn";chatBtn.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 16 16" fill="white"><path d="M8.006 0a8.006 8.006 0 0 0-6.829 3.826 7.995 7.995 0 0 0-.295 7.818l-.804 2.402a1.48 1.48 0 0 0 1.877 1.876l2.403-.8a8.006 8.006 0 0 0 11.42-5.25 7.994 7.994 0 0 0-4.28-9.066A8.007 8.007 0 0 0 8.006 0Zm0 14.22a6.226 6.226 0 0 1-3.116-.836.89.89 0 0 0-.727-.074l-2.207.736.736-2.206a.888.888 0 0 0-.074-.727A6.218 6.218 0 0 1 7.19 1.831a6.227 6.227 0 0 1 6.565 3.784 6.218 6.218 0 0 1-1.96 7.318 6.227 6.227 0 0 1-3.789 1.286Z"></path></svg>';Object.assign(chatBtn.style,{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#4F00ED",display:"flex",justifyContent:"center",alignItems:"center",color:"white",fontSize:"24px",cursor:"pointer",zIndex:"9999",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(79, 0, 237, 0.4)",border:"none"});var chatContainer=document.createElement("div");chatContainer.id="sbai-chat-container";Object.assign(chatContainer.style,{position:"fixed",right:"20px",bottom:"90px",width:"400px",height:"600px",maxWidth:"calc(100vw - 40px)",maxHeight:"calc(100vh - 120px)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)",zIndex:"9998",opacity:"0",visibility:"hidden",transform:"translateY(20px)",transition:"all 0.3s ease",backgroundColor:"white",overflow:"hidden"});document.body.appendChild(chatBtn);document.body.appendChild(chatContainer);var isOpen=false;chatBtn.addEventListener("click",function(){isOpen=!isOpen;if(isOpen){chatContainer.style.opacity="1";chatContainer.style.visibility="visible";chatContainer.style.transform="translateY(0)";chatBtn.style.transform="rotate(45deg)";if(!chatContainer.querySelector('iframe')){var iframe=document.createElement('iframe');iframe.src=window.SbaiConfig.apiBase+"/widget/"+window.SbaiConfig.appId;iframe.style.cssText="width:100%;height:100%;border:none;border-radius:16px;";chatContainer.appendChild(iframe);}}else{chatContainer.style.opacity="0";chatContainer.style.visibility="hidden";chatContainer.style.transform="translateY(20px)";chatBtn.style.transform="rotate(0deg)"}});document.addEventListener("click",function(e){if(!chatBtn.contains(e.target)&&!chatContainer.contains(e.target)&&isOpen){isOpen=false;chatContainer.style.opacity="0";chatContainer.style.visibility="hidden";chatContainer.style.transform="translateY(20px)";chatBtn.style.transform="rotate(0deg)"}});}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",initChatWidget)}else{initChatWidget()}})();</script>
</body>
</html>