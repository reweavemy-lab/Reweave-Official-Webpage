<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="/Users/howiesim/Documents/Reweave Official Webpage/images/Reweave logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Try-On - Reweave</title>
    <link rel="stylesheet" href="/shared/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
    <style>
        /* Try-On Page Specific Styles */
        .tryon-container {
            padding: 120px 0 80px;
        }
        
        .tryon-header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .tryon-header h1 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .tryon-header p {
            max-width: 700px;
            margin: 0 auto;
            color: var(--earth-brown);
        }
    </style>
</head>
<body>
    <!-- Standardized Header Component for Reweave -->
    <header class="header">
        <div class="header-container">
            <div class="nav-left">
                <button class="nav-btn" title="AI Try-On" onclick="window.location.href='/pages/tryon/index.html'">AI Try-On</button>
            </div>
            
            <a href="/" class="logo">REWEAVE</a>
            
            <div class="nav-right">
                <button class="nav-btn cart-btn" onclick="window.location.href='/pages/cart/index.html'">
                    <i class="fas fa-shopping-bag"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </button>
            </div>
        </div>
    </header>

    <section class="tryon-container">
        <div class="container">
            <div class="tryon-header">
                <h1>Virtual Try-On</h1>
                <p>See how our products look on you before you buy.</p>
            </div>

            <div style="width:100%;max-width:1200px;margin:0 auto;">
            <!-- Seamless Embed Container - Opens Streamlit in a popup that looks embedded -->
            <div id="embed-container" style="position:relative;width:100%;height:1000px;border-radius:12px;box-shadow:0 5px 15px rgba(0,0,0,0.08);overflow:hidden;background:#f5f5f5;">
                <div id="embed-placeholder" style="width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;cursor:pointer;" onclick="openTryOnEmbed()">
                    <div style="text-align:center;padding:40px;">
                        <i class="fas fa-magic" style="font-size:4rem;margin-bottom:20px;opacity:0.9;"></i>
                        <h2 style="font-size:2rem;margin-bottom:15px;font-weight:600;">AI Try-On Experience</h2>
                        <p style="font-size:1.1rem;margin-bottom:30px;opacity:0.95;">Click to launch our AI-powered virtual try-on</p>
                        <button class="btn" style="background:white;color:#667eea;padding:15px 40px;font-size:1.1rem;font-weight:600;border:none;border-radius:8px;cursor:pointer;box-shadow:0 4px 15px rgba(0,0,0,0.2);transition:transform 0.2s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            <i class="fas fa-play" style="margin-right:10px;"></i>Launch Try-On
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Full-screen overlay for seamless embedding -->
            <div id="tryon-overlay" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);z-index:9999;overflow:hidden;">
                <div style="position:relative;width:100%;height:100%;">
                    <button id="close-overlay" onclick="closeTryOnEmbed()" style="position:absolute;top:20px;right:20px;z-index:10000;background:rgba(255,255,255,0.9);border:none;border-radius:50%;width:50px;height:50px;cursor:pointer;font-size:24px;color:#333;box-shadow:0 2px 10px rgba(0,0,0,0.3);display:flex;align-items:center;justify-content:center;">
                        <i class="fas fa-times"></i>
                    </button>
                    <iframe id="tryon-embed-frame" src="about:blank" style="width:100%;height:100%;border:none;"></iframe>
                </div>
            </div>
            </div>
        </div>
    </section>

    <!-- Standardized Footer Component for Reweave -->
    <footer class="footer">
        <div class="container">
            <div class="footer-brand">REWEAVE</div>
            <div class="footer-text">
                Sustainable fashion, reimagined. Crafting heritage into modern essentials.
            </div>
            <div class="footer-links">
                <a href="../story/index.html" class="footer-link">Our Story</a>
                <a href="../impact/index.html" class="footer-link">Sustainability</a>
                <a href="../community/index.html" class="footer-link">Community</a>
                <a href="../team/index.html" class="footer-link">Contact</a>
            </div>
            <div class="footer-trust">
                <span class="trust-badge">FPX Available</span>
                <span class="trust-badge">Visa</span>
                <span class="trust-badge">Mastercard</span>
                <span class="trust-badge">30-day Returns</span>
            </div>
        </div>
    </footer>
            
    <script src="/shared/script.js"></script>
    <script>
        const streamlitUrl = 'https://reweave-ai-try-on-nwuappplx28vde2yqwhpilz.streamlit.app/';
        
        function openTryOnEmbed() {
            console.log('Opening Try-On overlay...');
            const overlay = document.getElementById('tryon-overlay');
            const iframe = document.getElementById('tryon-embed-frame');
            
            if (!overlay || !iframe) {
                console.error('Overlay or iframe element not found!');
                return;
            }
            
            // Try to load with embed parameter
            iframe.src = streamlitUrl + '?embed=true';
            overlay.style.display = 'block';
            
            // Prevent body scroll when overlay is open
            document.body.style.overflow = 'hidden';
            
            console.log('Overlay should be visible now');
            
            // Close on escape key
            const escapeHandler = function(e) {
                if (e.key === 'Escape') {
                    closeTryOnEmbed();
                    document.removeEventListener('keydown', escapeHandler);
                }
            };
            document.addEventListener('keydown', escapeHandler);
        }
        
        function closeTryOnEmbed() {
            console.log('Closing Try-On overlay...');
            const overlay = document.getElementById('tryon-overlay');
            const iframe = document.getElementById('tryon-embed-frame');
            
            if (overlay) overlay.style.display = 'none';
            if (iframe) iframe.src = 'about:blank';
            document.body.style.overflow = '';
        }
        
        // Debug: Check if elements exist
        window.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded');
            console.log('embed-placeholder:', document.getElementById('embed-placeholder'));
            console.log('tryon-overlay:', document.getElementById('tryon-overlay'));
            console.log('tryon-embed-frame:', document.getElementById('tryon-embed-frame'));
        });
    </script>
</body>
</html>

