<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/x-icon" href="images/Reweave logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Your Cart • Reweave</title>
  <link rel="stylesheet" href="../archive/development-files/css/styles.css" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root {
      --primary-black: #000000;
      --primary-white: #ffffff;
      --luxury-gray: #f8f8f8;
      --text-gray: #666666;
      --border-gray: #e5e5e5;
      --hover-gray: #f0f0f0;
      --success: #2e7d32;
    }
    body { font-family: 'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color: var(--primary-black); background: var(--primary-white); }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px; }
    .page-title { font-family: 'Playfair Display', serif; font-size: 2.5rem; font-weight: 300; margin: 16px 0 8px; letter-spacing: 1px; }
    .subtext { color: var(--text-gray); font-size: 14px; font-weight: 300; }

    .cart-grid { display: grid; grid-template-columns: 1fr 360px; gap: 32px; margin-top: 24px; }
    @media (max-width: 980px) { .cart-grid { grid-template-columns: 1fr; } }

    /* Items list */
    .items-card { background: var(--primary-white); border: 1px solid var(--border-gray); border-radius: 12px; }
    .item-row { display: grid; grid-template-columns: 96px 1fr auto; gap: 16px; padding: 16px; align-items: center; border-bottom: 1px solid var(--border-gray); transition: background-color 0.3s ease; }
    .item-row:hover { background-color: var(--luxury-gray); }
    .item-row:last-child { border-bottom: none; }
    .thumb { width: 96px; height: 96px; border-radius: 10px; background: var(--luxury-gray); display:flex; align-items:center; justify-content:center; overflow:hidden; }
    .thumb img { width: 100%; height: 100%; object-fit: cover; }
    .item-main h3 { font-family: 'Montserrat', sans-serif; font-size: 16px; margin: 0 0 6px; font-weight: 400; }
    .item-meta { color: var(--text-gray); font-size: 13px; font-weight: 300; }
    .qty { display:flex; border:1px solid var(--border-gray); border-radius: 8px; overflow:hidden; }
    .qty button { width: 36px; height: 36px; border: none; background: var(--luxury-gray); cursor:pointer; font-family: 'Montserrat', sans-serif; font-weight: 300; }
    .qty input { width: 46px; text-align:center; border:none; font-family: 'Montserrat', sans-serif; font-weight: 300; }
    .item-actions { display:flex; gap:12px; align-items:center; }
    .link-muted { color: var(--text-gray); font-size: 13px; text-decoration: underline; cursor:pointer; font-family: 'Montserrat', sans-serif; font-weight: 300; }

    /* Empty cart */
    .empty-cart {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-gray);
    }
    .empty-cart i {
      font-size: 64px;
      margin-bottom: 16px;
      opacity: 0.5;
    }
    .empty-cart h3 {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      margin-bottom: 8px;
      color: var(--primary-black);
    }

    /* Summary */
    .summary { position: sticky; top: 24px; background: var(--luxury-gray); border: 1px solid var(--border-gray); border-radius: 12px; padding: 24px; height: fit-content; }
    .summary h3 { font-family: 'Playfair Display', serif; font-size: 18px; font-weight: 300; margin: 0 0 12px; letter-spacing: 1px; }
    .summary-row { display:flex; justify-content: space-between; align-items:center; padding: 8px 0; font-family: 'Montserrat', sans-serif; font-weight: 300; }
    .summary-row.total { border-top:1px solid var(--border-gray); margin-top:8px; padding-top:12px; font-weight:400; }
    .field { display:flex; gap:8px; margin: 8px 0 4px; }
    .field input { flex:1; padding:8px; border:1px solid var(--border-gray); border-radius:8px; font-family: 'Montserrat', sans-serif; font-weight: 300; }
    .notice { color: var(--text-gray); font-size: 13px; font-family: 'Montserrat', sans-serif; font-weight: 300; }
    .savings { color: var(--success); font-size: 12px; font-family: 'Montserrat', sans-serif; font-weight: 300; }
    
    /* Buttons */
    .btn {
      display: inline-block;
      padding: 14px 24px;
      background: var(--primary-black);
      color: var(--primary-white);
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      width: 100%;
      text-decoration: none;
      font-family: 'Montserrat', sans-serif;
    }
    
    .btn:hover {
      background: var(--primary-white);
      color: var(--primary-black);
      border: 1px solid var(--primary-black);
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .btn-secondary {
      background: var(--primary-white);
      color: var(--primary-black);
      border: 1px solid var(--border-gray);
    }
    
    .btn-secondary:hover {
      background: var(--primary-black);
      color: var(--primary-white);
    }

    /* Continue shopping */
    .continue-shopping {
      display: inline-block;
      margin-top: 16px;
      color: var(--text-gray);
      text-decoration: none;
      font-size: 14px;
    }
    
    .continue-shopping:hover {
      color: var(--primary-black);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container { padding: 16px; }
      .summary { padding: 20px; }
    }
    
    /* Toast Notifications */
    .toast {
      position: fixed;
      top: 100px;
      right: 20px;
      background: var(--primary-black);
      color: var(--primary-white);
      padding: 16px 24px;
      border-radius: 8px;
      font-family: 'Montserrat', sans-serif;
      font-size: 14px;
      font-weight: 300;
      z-index: 10000;
      transform: translateX(400px);
      transition: transform 0.3s ease;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }
    
    .toast.show {
      transform: translateX(0);
    }
    
    .toast.success {
      background: #2e7d32;
    }
    
    .toast.error {
      background: #d32f2f;
    }
  </style>
</head>
<body>
  <!-- Homepage-style header -->
  <!-- Standardized Header Component for Reweave -->
<header class="header">
  <div class="header-container">
    <div class="nav-left">
      <button class="nav-btn" onclick="toggleMenu()">
        <i class="fas fa-bars"></i> Menu
      </button>
      <button class="nav-btn" onclick="window.location.href='pages/tryon/index.html'" title="AI Try-On">AI Try-On</button>
    </div>
    
    <a href="/index.html" class="logo">REWEAVE</a>
    
    <div class="nav-right">
      <button class="nav-btn cart-btn" onclick="window.location.href = '/pages/cart/index.html'"">
        <i class="fas fa-shopping-bag"></i>
        <span class="cart-count" id="cartCount">0</span>
      </button>
    </div>
  </div>
</header>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu">
  <div class="menu-header">
    <h3>Menu</h3>
    <button class="nav-btn" onclick="toggleMenu()">
      <i class="fas fa-times"></i>
    </button>
  </div>
  
  <div class="menu-section">
    <div class="menu-title">Shop</div>
    <a href="pages/shop/index.html" class="menu-link">Shop All</a>
    <a href="pages/shop/index.html#new-arrivals" class="menu-link">New Arrivals</a>
    <a href="pages/shop/index.html#batik-heritage" class="menu-link">Batik Heritage</a>
    <a href="pages/shop/index.html#songket-collection" class="menu-link">Songket Collection</a>
    <a href="pages/shop/index.html#accessories" class="menu-link">Accessories</a>
  </div>
  
  <div class="menu-section">
    <div class="menu-title">Our Story</div>
    <a href="pages/story/index.html" class="menu-link">About Reweave</a>
    <a href="pages/artisan/index.html" class="menu-link">Artisan Craft</a>
    <a href="pages/culture/index.html" class="menu-link">Cultural Heritage</a>
    <a href="pages/impact/index.html" class="menu-link">Sustainability</a>
    <a href="pages/community/index.html" class="menu-link">Community</a>
  </div>
  
  <div class="menu-section">
    <div class="menu-title">Experience</div>
    <a href="pages/tryon/index.html" class="menu-link">AI Try-On</a>
    <a href="pages/customize/index.html" class="menu-link">Customize</a>
    <a href="pages/journal/index.html" class="menu-link">Journal</a>
  </div>
  
  <div class="menu-section">
    <div class="menu-title">Support</div>
    <a href="pages/team/index.html" class="menu-link">Contact Us</a>
    <a href="#" class="menu-link">Shipping & Returns</a>
    <a href="#" class="menu-link">Size Guide</a>
    <a href="#" class="menu-link">Care Instructions</a>
  </div>
</div>

  <main class="container">
    <h1 class="page-title">Your Cart</h1>
    <p class="subtext">Review your items and proceed to checkout</p>

    <div class="cart-grid">
      <!-- Items list -->
      <div class="items-card" id="cartItems">
        <!-- Cart items will be populated here -->
      </div>

      <!-- Summary -->
      <div class="summary">
        <h3>Order Summary</h3>
        <div id="summaryContent">
          <div class="summary-row">
            <span>Subtotal</span>
            <span id="subtotal">RM 0.00</span>
          </div>
          <div class="summary-row">
            <span>Shipping</span>
            <span id="shipping">RM 10.00</span>
          </div>
          <div class="summary-row">
            <span>Tax (6%)</span>
            <span id="tax">RM 0.00</span>
          </div>
          <div class="summary-row total">
            <span>Total</span>
            <span id="total">RM 0.00</span>
          </div>
        </div>

        <!-- Promo code -->
        <div style="margin: 16px 0;">
          <div class="field">
            <input type="text" id="promoCode" placeholder="Promo code" />
            <button class="btn btn-secondary" onclick="applyPromo()" style="width: auto;">Apply</button>
          </div>
          <div class="notice" id="promoNotice"></div>
        </div>

        <!-- Checkout buttons -->
        <a href="../checkout/guest.html" class="btn" id="checkoutBtn">Proceed to Checkout</a>
        <a href="index.html#products" class="continue-shopping"><i class="fas fa-arrow-left"></i> Continue Shopping</a>

        <!-- Guest checkout info -->
        <div style="margin-top: 16px; padding: 12px; background: var(--primary-white); border: 1px solid var(--border-gray); border-radius: 8px;">
          <p style="font-size: 12px; color: var(--text-gray); margin: 0;">
            <i class="fas fa-info-circle"></i> No account needed! Complete your purchase as a guest.
          </p>
        </div>
      </div>
    </div>
  </main>
  <!-- Standardized Footer Component for Reweave -->
<footer class="footer">
  <div class="container">
    <div class="footer-brand">REWEAVE</div>
    <div class="footer-text">
      Sustainable fashion, reimagined. Crafting heritage into modern essentials.
    </div>
    <div class="footer-links">
      <a href="pages/story/index.html" class="footer-link">Our Story</a>
      <a href="pages/impact/index.html" class="footer-link">Sustainability</a>
      <a href="pages/community/index.html" class="footer-link">Community</a>
      <a href="pages/team/index.html" class="footer-link">Contact</a>
    </div>
    <div class="footer-trust">
      <span class="trust-badge">FPX Available</span>
      <span class="trust-badge">Visa</span>
      <span class="trust-badge">Mastercard</span>
      <span class="trust-badge">30-day Returns</span>
    </div>
  </div>
</footer>
  <section class="container" style="margin-top:24px;">
    <h3 style="font-family: 'Playfair Display', serif; font-weight:300; letter-spacing:1px;">You might also like</h3>
    <div id="upsellGrid" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px;"></div>
  </section>

  <script>
    // Cart functionality
    let cart = [];
    let promoDiscount = 0;
    let promoCode = '';
    const API_PRODUCTS = '/api/products.json';

    // Initialize cart - use reweave-cart key from main site
    function initCart() {
      cart = JSON.parse(localStorage.getItem('cart') || '[]');
      cart = cart.map(i => ({
        ...i,
        price: typeof i.price === 'string' ? parseFloat(String(i.price).replace(/[^0-9.]/g,'')) || 0 : Number(i.price || 0),
        qty: Number(i.qty || 1)
      }));
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
      updateSummary();
      loadUpsell();
    }

    // Render cart items
    function renderCart() {
      const cartItems = document.getElementById('cartItems');
      
      if (cart.length === 0) {
        cartItems.innerHTML = `
          <div class="empty-cart">
            <i class="fas fa-shopping-bag"></i>
            <h3>Your cart is empty</h3>
            <p>Add some beautiful items to get started</p>
            <a href="pages/shop/index.html" class="btn" style="margin-top: 16px;">Continue Shopping</a>
          </div>
        `;
        document.getElementById('checkoutBtn').style.display = 'none';
        return;
      }

      cartItems.innerHTML = cart.map((item, index) => `
        <div class="item-row">
          <div class="thumb">
            <img src="${item.image || 'images/Batik Front (WIP).png'}" alt="${item.name}" />
          </div>
          <div class="item-main">
            <h3>${item.name}</h3>
            <div class="item-meta">${item.variant || ''}</div>
            <div class="item-meta">RM ${Number(item.price || 0).toFixed(2)}</div>
          </div>
          <div class="item-actions">
            <div class="qty">
              <button onclick="updateQuantity(${index}, -1)">−</button>
              <input type="number" value="${item.qty || 1}" min="1" onchange="setQuantity(${index}, this.value)">
              <button onclick="updateQuantity(${index}, 1)">+</button>
            </div>
            <div style="text-align: right; min-width: 80px;">
              <div style="font-weight: 500;">RM ${Number((item.price || 0) * (item.qty || 1)).toFixed(2)}</div>
              <div class="link-muted" onclick="removeItem(${index})">Remove</div>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Update quantity
    function updateQuantity(index, change) {
      const newQty = Math.max(1, (cart[index].qty || 1) + change);
      cart[index].qty = newQty;
      saveCart();
      renderCart();
      updateSummary();
    }

    // Set quantity directly
    function setQuantity(index, qty) {
      const newQty = Math.max(1, parseInt(qty) || 1);
      cart[index].qty = newQty;
      saveCart();
      renderCart();
      updateSummary();
    }

    // Remove item
    function removeItem(index) {
      cart.splice(index, 1);
      saveCart();
      renderCart();
      updateSummary();
      updateCartCount();
    }

    // Save cart to localStorage
    function saveCart() {
      localStorage.setItem('cart', JSON.stringify(cart));
    }

    // Update summary
    function updateSummary() {
      const subtotal = cart.reduce((sum, item) => sum + Number(item.price || 0) * Number(item.qty || 1), 0);
      const shipping = 10; // Fixed shipping
      const tax = subtotal * 0.06; // 6% tax
      const discount = promoDiscount > 0 ? subtotal * promoDiscount : 0;
      const total = subtotal + shipping + tax - discount;

      document.getElementById('subtotal').textContent = formatMYR(subtotal);
      document.getElementById('shipping').textContent = formatMYR(shipping);
      document.getElementById('tax').textContent = formatMYR(tax);
      document.getElementById('total').textContent = formatMYR(total);

      // Show promo savings if applied
      const promoNotice = document.getElementById('promoNotice');
      if (promoDiscount > 0) {
        promoNotice.innerHTML = `<span class="savings">✓ Promo code applied: ${(promoDiscount * 100).toFixed(0)}% off</span>`;
      }
    }

    // Apply promo code
    function applyPromo() {
      const code = document.getElementById('promoCode').value.trim().toUpperCase();
      const promoNotice = document.getElementById('promoNotice');
      
      // Simple promo codes
      const promos = {
        'WELCOME10': 0.10,
        'FIRST5': 0.05,
        'REWEAVE15': 0.15
      };

      if (promos[code]) {
        promoDiscount = promos[code];
        promoCode = code;
        promoNotice.innerHTML = `<span class="savings">✓ Promo code applied: ${(promoDiscount * 100).toFixed(0)}% off</span>`;
        updateSummary();
      } else if (code) {
        promoNotice.innerHTML = '❌ Invalid promo code';
      }
    }

    // Update cart count in header
    function updateCartCount() {
      const count = cart.reduce((sum, item) => sum + Number(item.qty || 1), 0);
      const badge = document.querySelector('.cart-count');
      if (badge) badge.textContent = String(count);
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', initCart);

    // Header functionality (simplified)
    document.addEventListener('DOMContentLoaded', function() {
      // Simple cart count update for header
      updateCartCount();
      
      // Menu toggle (basic)
      const menuBtn = document.querySelector('.menu-btn');
      const hiddenNav = document.querySelector('.hidden-nav');
      const closeNav = document.querySelector('.close-nav');
      
      if (menuBtn && hiddenNav) {
        menuBtn.addEventListener('click', () => hiddenNav.classList.add('active'));
        closeNav.addEventListener('click', () => hiddenNav.classList.remove('active'));
      }
    });
    function loadUpsell() {
      const grid = document.getElementById('upsellGrid');
      if (!grid) return;
      grid.innerHTML = '<p style="color:#777">Loading recommendations...</p>';
      fetch(API_PRODUCTS)
        .then(r => r.json())
        .then(data => {
          const list = Array.isArray(data) ? data : (data.products || []);
          const picks = list.slice(0, 4);
          grid.innerHTML = picks.map(p => {
            const minVariant = (p.variants || [])[0] || { price: p.price || 0, options: {}, sku: p.id };
            const minPrice = (p.variants || []).reduce((m, v) => Math.min(m, Number(v.price || 0)), Number(minVariant.price || 0));
            const firstImage = (p.images && p.images[0]) || 'https://via.placeholder.com/300x300?text=Reweave';
            return `
              <div style="border:1px solid #e0e0e0;border-radius:10px;padding:12px;display:flex;gap:12px;align-items:center;">
                <img src="${firstImage}" alt="${p.name}" style="width:72px;height:72px;border-radius:8px;object-fit:cover;" />
                <div style="flex:1;">
                  <div style="font-size:14px;font-weight:500;">${p.name}</div>
                  <div style="font-size:13px;color:#666;">RM ${Number(minPrice).toFixed(2)}</div>
                </div>
                <button data-id="${p.id}" data-price="${Number(minVariant.price || minPrice)}" data-image="${firstImage}" data-name="${p.name}" class="btn btn-secondary" style="width:auto;">Add</button>
              </div>
            `;
          }).join('');
          Array.from(grid.querySelectorAll('button')).forEach(btn => {
            btn.addEventListener('click', () => {
              const item = {
                id: btn.getAttribute('data-id'),
                name: btn.getAttribute('data-name'),
                price: Number(btn.getAttribute('data-price') || 0),
                qty: 1,
                image: btn.getAttribute('data-image') || '',
                options: '',
                addon: true
              };
              const cur = JSON.parse(localStorage.getItem('cart') || '[]');
              const existing = cur.find(i => i.id === item.id && i.options === item.options);
              if (existing) existing.qty += 1; else cur.push(item);
              localStorage.setItem('cart', JSON.stringify(cur));
              cart = cur;
              renderCart();
              updateSummary();
              updateCartCount();
            });
          });
        })
        .catch(() => {
          const picks = [
            { id: 'mock-1', name: 'Batik Sling Small', price: 189, images: ['https://via.placeholder.com/300x300?text=Batik+Sling'] },
            { id: 'mock-2', name: 'Songket Tote', price: 259, images: ['https://via.placeholder.com/300x300?text=Songket+Tote'] },
            { id: 'mock-3', name: 'Canvas Pouch', price: 69, images: ['https://via.placeholder.com/300x300?text=Canvas+Pouch'] },
            { id: 'mock-4', name: 'Leather Wallet', price: 129, images: ['https://via.placeholder.com/300x300?text=Leather+Wallet'] }
          ];
          grid.innerHTML = picks.map(p => {
            const firstImage = (p.images && p.images[0]) || 'https://via.placeholder.com/300x300?text=Reweave';
            return `
              <div style="border:1px solid #e0e0e0;border-radius:10px;padding:12px;display:flex;gap:12px;align-items:center;">
                <img src="${firstImage}" alt="${p.name}" style="width:72px;height:72px;border-radius:8px;object-fit:cover;" />
                <div style="flex:1;">
                  <div style="font-size:14px;font-weight:500;">${p.name}</div>
                  <div style="font-size:13px;color:#666;">RM ${Number(p.price||0).toFixed(2)}</div>
                </div>
                <button data-id="${p.id}" data-price="${Number(p.price || 0)}" data-image="${firstImage}" data-name="${p.name}" class="btn btn-secondary" style="width:auto;">Add</button>
              </div>
            `;
          }).join('');
          Array.from(grid.querySelectorAll('button')).forEach(btn => {
            btn.addEventListener('click', () => {
              const item = {
                id: btn.getAttribute('data-id'),
                name: btn.getAttribute('data-name'),
                price: Number(btn.getAttribute('data-price') || 0),
                qty: 1,
                image: btn.getAttribute('data-image') || '',
                options: '',
                addon: true
              };
              const cur = JSON.parse(localStorage.getItem('cart') || '[]');
              const existing = cur.find(i => i.id === item.id && i.options === item.options);
              if (existing) existing.qty += 1; else cur.push(item);
              localStorage.setItem('cart', JSON.stringify(cur));
              cart = cur;
              renderCart();
              updateSummary();
              updateCartCount();
            });
          });
        });
    }
    function loadUpsell() {
      const grid = document.getElementById('upsellGrid');
      if (!grid) return;
      grid.innerHTML = '<p style="color:#777">Loading recommendations...</p>';
      fetch(API_PRODUCTS)
        .then(r => r.json())
        .then(data => {
          const list = Array.isArray(data) ? data : (data.products || []);
          const picks = list.slice(0, 4);
          grid.innerHTML = picks.map(p => {
            const minVariant = (p.variants || [])[0] || { price: p.price || 0, options: {}, sku: p.id };
            const minPrice = (p.variants || []).reduce((m, v) => Math.min(m, Number(v.price || 0)), Number(minVariant.price || 0));
            const firstImage = (p.images && p.images[0]) || 'https://via.placeholder.com/300x300?text=Reweave';
            return `
              <div style="border:1px solid #e0e0e0;border-radius:10px;padding:12px;display:flex;gap:12px;align-items:center;">
                <img src="${firstImage}" alt="${p.name}" style="width:72px;height:72px;border-radius:8px;object-fit:cover;" />
                <div style="flex:1;">
                  <div style="font-size:14px;font-weight:500;">${p.name}</div>
                  <div style="font-size:13px;color:#666;">${formatMYR(minPrice)}</div>
                </div>
                <button data-id="${p.id}" data-price="${Number(minVariant.price || minPrice)}" data-image="${firstImage}" data-name="${p.name}" class="btn btn-secondary" style="width:auto;">Add</button>
              </div>
            `;
          }).join('');
          Array.from(grid.querySelectorAll('button')).forEach(btn => {
            btn.addEventListener('click', () => {
              const item = {
                id: btn.getAttribute('data-id'),
                name: btn.getAttribute('data-name'),
                price: Number(btn.getAttribute('data-price') || 0),
                qty: 1,
                image: btn.getAttribute('data-image') || '',
                options: '',
                addon: true
              };
              const cur = JSON.parse(localStorage.getItem('cart') || '[]');
              const existing = cur.find(i => i.id === item.id && i.options === item.options);
              if (existing) existing.qty += 1; else cur.push(item);
              localStorage.setItem('cart', JSON.stringify(cur));
              cart = cur;
              renderCart();
              updateSummary();
              updateCartCount();
            });
          });
        })
        .catch(() => { grid.innerHTML = ''; });
    }
  </script>
  
  <!-- Toast Notification Container -->
  <div id="toastContainer" style="position: fixed; top: 100px; right: 20px; z-index: 10000;"></div>
  
  <!-- Toast Notification Script -->
  <script>
    const API_PRODUCTS = 'http://localhost:3001/api/products';
    const formatMYR = v => `RM ${Number(v || 0).toFixed(2)}`;
    function showToast(message, type = 'info', duration = 3000) {
      const container = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      container.appendChild(toast);
      setTimeout(() => toast.classList.add('show'), 10);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, duration);
    }
    window.alert = function(message) { showToast(message, 'success'); };
  </script>

  <script src="/shared/script.js"></script>
</body>
</html>